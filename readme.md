
## ğŸ§­ äº§å“å®šä½ç®€è¿°

### ğŸ¯ **ç›®æ ‡**

æ„å»ºä¸€ä¸ªâ€œ**å›¾ç‰‡ä¸Šä¼  â†’ è‡ªåŠ¨è£å‰ª â†’ å¤šè®¾å¤‡ Widget è‡ªåŠ¨å±•ç¤º**â€çš„ iOS 18çš„åº”ç”¨ï¼Œå¸®åŠ©ç”¨æˆ·åœ¨æ— éœ€åå¤æ“ä½œçš„å‰æä¸‹ï¼ŒæŠŠå–œçˆ±çš„å›¾ç‰‡ä»¥é«˜è´¨é‡ã€ç¨³å®šä¸€è‡´çš„æ–¹å¼å±•ç¤ºåœ¨è®¾å¤‡æ¡Œé¢ä¸Šã€‚

---

## ğŸ“± ä½¿ç”¨åœºæ™¯ä¸ç”¨æˆ·ä»·å€¼

| è§’è‰²         | éœ€æ±‚                       | æœ¬äº§å“å¦‚ä½•æ»¡è¶³                  |
| ---------- | ------------------------ | ------------------------ |
| ç”¨æˆ·ï¼ˆiPhoneï¼‰ | æƒ³æŠŠå–œçˆ±çš„æ’ç”»/ç…§ç‰‡è®¾ç½®åœ¨ Widget ä¸Šå±•ç¤º | App æä¾›ä¸Šä¼ ç•Œé¢ï¼Œä¸€æ¬¡ä¸Šä¼ åè‡ªåŠ¨ç”Ÿæ•ˆ     |
| ç”¨æˆ·ï¼ˆMacï¼‰    | å¸Œæœ›åœ¨ Mac ä¸Šä¹Ÿçœ‹åˆ°åŒæ ·å›¾ç‰‡         | æœªæ¥å¯é€šè¿‡ CloudKit è‡ªåŠ¨åŒæ­¥      |
| ç”¨æˆ·ï¼ˆéæŠ€æœ¯ï¼‰    | ä¸æ‡‚å‰ªè£æ¯”ä¾‹ï¼Œä¸å¸Œæœ›å›¾ç‰‡è¢«è£æ‰æˆ–æ‹‰ä¼¸       | App è‡ªåŠ¨è£å‰ªä¸º Widget æ¯”ä¾‹ï¼Œé¿å…å¤±çœŸ |
| è¿½æ±‚ä»ªå¼æ„Ÿç”¨æˆ·    | å–œæ¬¢å®šæœŸæ›´æ¢æ¡Œé¢ç…§ç‰‡å½¢æˆâ€œç”Ÿæ´»æ„Ÿâ€        | å¯ç®¡ç†æœ€å¤š 30 å¼ å›¾ç‰‡ï¼Œè‡ªåŠ¨è½®æ’­ï¼Œæ— éœ€æ‰‹åŠ¨åˆ‡æ¢ |

---

## ğŸ§© åŠŸèƒ½ç»“æ„æ€»è§ˆ

### App ä¸»ä½“åŠŸèƒ½ï¼š

| åŠŸèƒ½            | æè¿°                                                   |
| --------------- | ------------------------------------------------------ |
| âœ… æ·»åŠ å›¾ç‰‡      | é€‰æ‹©è‡ªå®šä¹‰å›¾ç‰‡ï¼Œè‡ªåŠ¨è£å‰ªä¸º Widget æ¯”ä¾‹                 |
| âœ… è£å‰ªé€»è¾‘      | å›ºå®šä¸­å°ºå¯¸ Widget æ¯”ä¾‹                                 |
| âœ… æ–‡ä»¶å­˜å‚¨      | è£å‰ªå›¾ä¿å­˜è‡³ App Groupï¼Œå‘½åä¸º UUID.jpg                |
| âœ… metadata ç®¡ç† | ä½¿ç”¨ JSON è®°å½•æ·»åŠ æ—¶é—´ã€é¡ºåºç­‰                         |
| âœ… åˆ é™¤å•å¼ å›¾ç‰‡  | é•¿æŒ‰å›¾ç‰‡å¡ç‰‡åˆ é™¤ï¼Œå¹¶æ›´æ–° metadata ä¸ç¼“å­˜               |
| âœ… æ¸…ç©ºå…¨éƒ¨å›¾ç‰‡  | ä¸€é”®æ¸…ç©ºæ‰€æœ‰å›¾ç‰‡ï¼Œç«‹å³åˆ·æ–° Widget                      |
| âœ… æ•°é‡é™åˆ¶      | é™åˆ¶æœ€å¤šæ·»åŠ  30 å¼ å›¾ç‰‡ï¼Œè¶…é™åæŒ‰é’®ç½®ç°ï¼Œæ˜¾ç¤º â€œ30 / 30â€ |
| âœ… æƒé™å¤„ç†      | å‹å¥½æç¤ºç…§ç‰‡è®¿é—®æƒé™å¼•å¯¼åˆ°ç³»ç»Ÿè®¾ç½®                     |

---

### Widget åŠŸèƒ½ï¼š

| æ¨¡å—       | è¯´æ˜                                     |
| -------- | -------------------------------------- |
| ğŸ“¦ æœ¬åœ°è¯»å–  | Widget ä½¿ç”¨ App Group ä¸­çš„è£å‰ªå›¾ç‰‡ä¸ metadata   |
| ğŸï¸ æ˜¾ç¤ºæ–¹å¼ | æ”¯æŒé¡ºåºæ’­æ”¾ï¼ˆé»˜è®¤æŒ‰æ·»åŠ é¡ºåºï¼‰ï¼Œæœªæ¥å¯æ‰©å±•éšæœºæ’­æ”¾              |
| ğŸ”„ æ•°æ®åˆ·æ–°  | App æ¯æ¬¡å›¾ç‰‡å˜åŠ¨åç«‹å³è°ƒç”¨ `reloadAllTimelines()` |
| ğŸ“± å±•ç¤ºå¹³å°  | æ”¯æŒ iPhone ä¸»å±ã€macOS æ¡Œé¢ä¸­å· Widgetï¼ˆæœªæ¥ï¼‰     |

---

## ğŸ› ï¸ æŠ€æœ¯å®ç°æ ¸å¿ƒåŸåˆ™

| å…³é”®ç‚¹          | è¯´æ˜                                                    |
| ------------ | ----------------------------------------------------- |
| æœ¬åœ°è£å‰ª         | å›¾ç‰‡ç”± App ä¸»åŠ¨å¤„ç†è£å‰ªï¼Œé¿å… Widget è‡ªåŠ¨ç¼©æ”¾çš„å¤±æ§é—®é¢˜                    |
| metadata ç‹¬ç«‹  | å›¾ç‰‡åˆ—è¡¨é€šè¿‡ `metadata.json` ç®¡ç†ï¼Œé¿å…æ–‡ä»¶ç³»ç»Ÿä¸ä¸€è‡´é—®é¢˜                 |
| App Group å…±äº« | å›¾ç‰‡ä¸ metadata å­˜äº App Groupï¼Œç¡®ä¿ App ä¸ Widget é€šä¿¡          |
| å¯æ‰©å±•æ€§         | æœªæ¥å¯è¿ç§»è‡³ CloudKitï¼šmetadata â†’ `CKRecord`ï¼Œè£å‰ªå›¾ â†’ `CKAsset` |
| å¼ºç”¨æˆ·æ„ŸçŸ¥æ›´æ–°      | æ¯æ¬¡å›¾ç‰‡å˜åŠ¨éƒ½å¼ºåˆ¶åˆ·æ–° Widgetï¼Œå‡ ç§’å†…å®Œæˆåé¦ˆ                            |

---

## ğŸ§  æ€»ç»“ä¸€å¥è¯ï¼š

> è¿™æ˜¯ä¸€æ¬¾å¼ºè°ƒâ€œ**è§†è§‰æ§åˆ¶ã€è‡ªåŠ¨åŒæ­¥ã€è½»é‡ä½“éªŒ**â€çš„æ¡Œé¢å›¾åƒå±•ç¤ºå·¥å…·ï¼Œç”¨æˆ·ä¸Šä¼ å³å±•ç¤ºï¼Œè£å‰ªå¯æ§ï¼Œæ•ˆæœç»Ÿä¸€ï¼Œä¸ºæ—¥å¸¸ç”Ÿæ´»æ·»åŠ å®¡ç¾æ„Ÿä¸é™ªä¼´æ„Ÿã€‚

---




------

# ğŸ“± åº”ç”¨é¡µé¢è®¾è®¡æ–‡æ¡£

## é¡µé¢ä¸€ï¼š**é¦–é¡µï¼ˆContentViewï¼‰**

### UI å…ƒç´ ï¼ˆå®é™…å®ç°ï¼‰

| å…ƒç´                   | ç±»å‹         | æ“ä½œ     | å®ç°å‡½æ•°                          |
| --------------------- | ------------ | -------- | ------------------------------------- |
| ã€ŒChoose Photosã€æŒ‰é’® | PhotosPicker | ç‚¹å‡»     | `PhotosPicker(selection:)` â†’ ç›´æ¥é€‰æ‹©å›¾ç‰‡ |
| åº•éƒ¨ Logo / è£…é¥°      | Image        | é™æ€å±•ç¤º | æ— åŠŸèƒ½ï¼Œä»…è£…é¥°ç”¨é€”                    |

### ğŸ§© åŠŸèƒ½ä½œç”¨

- å¼•å¯¼ç”¨æˆ·è¿›å…¥ã€Œæ·»åŠ å›¾ç‰‡ â†’ æµè§ˆã€æµç¨‹ï¼›
- ç›´æ¥é›†æˆäº†å›¾ç‰‡é€‰æ‹©ã€è£å‰ªå’Œä¿å­˜é€»è¾‘ï¼›
- é€‰æ‹©å›¾ç‰‡åè‡ªåŠ¨è£å‰ªå¹¶è·³è½¬è¿›å…¥ **æµè§ˆé¡µï¼ˆGalleryViewï¼‰**ã€‚

------

## é¡µé¢äºŒï¼š**æµè§ˆé¡µï¼ˆå·²æ·»åŠ å›¾ç‰‡å¡ç‰‡å±•ç¤ºï¼‰**

### UI å…ƒç´ æ‹†è§£ï¼ˆå®é™…å®ç°ï¼‰

| å…ƒç´                     | ç±»å‹                       | æ“ä½œ         | å®ç°å‡½æ•°                                     |
| ----------------------- | -------------------------- | ------------ | -------------------------------------------- |
| å›¾ç‰‡å¡ç‰‡                | `ScrollView + VStack + ForEach` | å±•ç¤ºæ¯å¼ å›¾ç‰‡ï¼Œå¸¦3Dæ—‹è½¬æ•ˆæœ | `getAllImages()`ï¼šä» ImageManager ä¸­åŠ è½½        |
| å›¾ç‰‡å¡ç‰‡ï¼ˆé•¿æŒ‰ï¼‰        | `contextMenu`              | å¼¹å‡ºåˆ é™¤èœå• | `deleteImage(withID:)` å¹¶åˆ·æ–° UI å’Œ metadata     |
| å›¾ç‰‡æ•°é‡æç¤ºï¼ˆ11 / 30ï¼‰ | Text                       | åŠ¨æ€å±•ç¤º     | `uiImages.count / 30`ï¼šç›´æ¥æ˜¾ç¤ºå½“å‰æ•°é‡   |
| ã€Œæ·»åŠ å›¾ç‰‡ã€æŒ‰é’®        | PhotosPicker              | æ‰“å¼€ç³»ç»Ÿç›¸å†Œ | `PhotosPicker(selection:)` â†’ è£å‰ªä¿å­˜å¹¶åˆ·æ–°      |
| ã€Œæ·»åŠ å›¾ç‰‡ã€æŒ‰é’®ç½®ç°    | æ¡ä»¶æ¸²æŸ“                   | è¾¾ä¸Šé™éšè—   | `if !ImageManager.shared.isMaxImageCountReached()`              |
| ã€Œæ¸…ç©ºå…¨éƒ¨å›¾ç‰‡ã€æŒ‰é’®    | Button + UIAlertController | æ¸…ç©ºå…¨éƒ¨å›¾ç‰‡å¹¶ç¡®è®¤ | `clearAllImages()`ï¼šåˆ é™¤æ–‡ä»¶ + metadata æ¸…ç©º |
| æ— å›¾ç‰‡çŠ¶æ€æ—¶è¿”å›é¦–é¡µ    | æ¡ä»¶æ¸²æŸ“ + onAppear       | è‡ªåŠ¨è·³è½¬     | `if uiImages.isEmpty { dismiss() }`       |
| å·¦ä¾§å¹´ä»½å’Œå‘¨æ•°æ˜¾ç¤º      | VStack                     | é™æ€å±•ç¤º     | æ˜¾ç¤ºå›ºå®šçš„"2025"å’Œ"Week 27"æ–‡æœ¬ |
| è‡ªå®šä¹‰è¿”å›æŒ‰é’®          | ToolbarItem + Button      | è¿”å›ä¸Šä¸€é¡µ   | `dismiss()` å…³é—­å½“å‰è§†å›¾ |

------

## é¡µé¢ä¸‰ï¼š**Widget å±•ç¤ºé¡µï¼ˆä¸­å°ºå¯¸ Widget æ•ˆæœï¼‰**

> âš ï¸ è¯¥é¡µé¢ä»…ç”¨äº App å†… Mock æ•ˆæœï¼Œå®é™… Widget å†…å®¹ç”± `TimelineProvider` æä¾›

### Widget åŠŸèƒ½å¯¹åº”

| åŠŸèƒ½           | Widget å®ç°æ–¹å¼                                              |
| -------------- | ------------------------------------------------------------ |
| è‡ªåŠ¨è½®æ’­       | `getTimeline()` ä¸­ç”Ÿæˆå¤šä¸ª `TimelineEntry`                   |
| å›¾ç‰‡å±•ç¤º       | ä» App Group ä¸­è¯»å– `metadata + æ–‡ä»¶è·¯å¾„`                    |
| é¡ºåºæ’­æ”¾       | éå† metadataï¼ŒæŒ‰æ·»åŠ é¡ºåºæ’åº                                |
| æ¸…ç©ºå›¾ç‰‡åæ›´æ–° | App ç«¯è°ƒç”¨ `WidgetCenter.shared.reloadAllTimelines()` è¿›è¡Œåˆ·æ–° |

------

## âœ… é¡µé¢ç»“æ„ä¸€è§ˆ

```text
[é¦–é¡µ - ContentView]
 â””â”€â”€ PhotosPickerã€ŒChoose Photosã€
       â†’ ç›´æ¥é€‰æ‹©ã€è£å‰ªã€ä¿å­˜å›¾ç‰‡å¹¶è·³è½¬

[æµè§ˆé¡µ - GalleryView]
 â”œâ”€â”€ å›¾ç‰‡å¡ç‰‡å±•ç¤ºï¼ˆ3Dæ—‹è½¬æ•ˆæœï¼‰
 â”‚     â†’ getAllImages() ä» ImageManager ä¸­åŠ è½½
 â”œâ”€â”€ å›¾ç‰‡å¡ç‰‡é•¿æŒ‰åˆ é™¤ï¼ˆcontextMenuï¼‰
 â”‚     â†’ deleteImage(withID:) + åˆ·æ–°UI
 â”œâ”€â”€ æ¸…ç©ºå…¨éƒ¨å›¾ç‰‡æŒ‰é’®ï¼ˆå¸¦ç¡®è®¤å¯¹è¯æ¡†ï¼‰
 â”‚     â†’ clearAllImages() + åˆ·æ–°UI
 â”œâ”€â”€ æ·»åŠ å›¾ç‰‡æŒ‰é’®ï¼ˆå±…ä¸­æ˜¾ç¤ºï¼‰
 â”‚     â†’ PhotosPicker + è£å‰ª + ä¿å­˜
 â”œâ”€â”€ å›¾ç‰‡æ•°é‡æç¤º
 â”‚     â†’ uiImages.count / 30
 â”œâ”€â”€ å·¦ä¾§å¹´ä»½å’Œå‘¨æ•°æ˜¾ç¤º
 â”‚     â†’ é™æ€æ–‡æœ¬"2025"å’Œ"Week 27"
 â””â”€â”€ è‡ªå®šä¹‰è¿”å›æŒ‰é’®
       â†’ æ›¿ä»£ç³»ç»Ÿé»˜è®¤è¿”å›æŒ‰é’®

[Widget å±•ç¤ºé¡µ]
 â””â”€â”€ getTimeline()
       â†’ ä» App Group è¯»å– metadata + å›¾åƒ
       â†’ ç”Ÿæˆ TimelineEntry
       â†’ æ˜¾ç¤ºå¹´ä»½å’Œå‘¨æ•°ä¿¡æ¯
```

------

