# Widget 图片裁剪简化需求文档

## 简介

基于产品定位重新思考，当前的多尺寸复杂裁剪策略过于复杂且效果不佳。需要简化为单一尺寸的视觉重心裁剪方案，专注于核心用户价值：在 Widget 上展示用户喜爱的图片。

## 需求

### 需求 1：专注大尺寸 Widget 支持

**用户故事：** 作为用户，我希望应用专注于提供最佳的大尺寸 Widget 图片展示效果。

#### 验收标准

1. WHEN 用户上传图片时 THEN 系统应该生成 Large Widget (1:1 正方形) 尺寸的裁剪版本
2. WHEN Widget 显示时 THEN 应该支持 systemLarge 类型的 Widget
3. WHEN 用户查看应用时 THEN 界面应该针对大尺寸 Widget 进行优化设计
4. WHEN 系统存储图片时 THEN 应该只保存大尺寸版本的裁剪结果

### 需求 2：基于视觉重心的简化裁剪

**用户故事：** 作为用户，我希望系统能够识别图片的视觉重心，并以此为基础进行裁剪，确保重要内容不丢失。

#### 验收标准

1. WHEN 系统处理图片时 THEN 应该识别图片的视觉重心位置
2. WHEN 确定视觉重心后 THEN 应该以视觉重心为中心进行 1:1 正方形裁剪
3. WHEN 视觉重心靠近图片边缘时 THEN 应该调整裁剪区域确保不超出图片边界
4. WHEN 裁剪完成后 THEN 裁剪区域应该包含识别到的视觉重心

### 需求 3：保持图片原始清晰度

**用户故事：** 作为用户，我希望看到的是原图质量的裁剪版本，保持最佳的视觉效果。

#### 验收标准

1. WHEN 系统裁剪图片时 THEN 应该保持原图的像素密度和清晰度
2. WHEN 原图尺寸小于目标裁剪尺寸时 THEN 应该保持原图尺寸输出
3. WHEN 裁剪区域确定后 THEN 应该只进行必要的等比例缩小处理
4. WHEN 最终输出时 THEN 图片质量应该达到原图的清晰度标准

### 需求 4：保留图片重要内容

**用户故事：** 作为用户，我希望裁剪后的图片能够保留原图中最重要、最吸引人的部分。

#### 验收标准

1. WHEN 图片被裁剪时 THEN 重要的视觉元素应该被保留在裁剪区域内
2. WHEN 图片包含明显主体时 THEN 主体应该位于裁剪结果的中心区域
3. WHEN 用户查看裁剪结果时 THEN 应该能够清楚看到原图的核心内容
4. WHEN 裁剪完成后 THEN 结果应该在视觉上比几何中心裁剪更合理

### 需求 5：裁剪区域边界处理

**用户故事：** 作为系统，我需要确保裁剪区域始终在图片边界内，并且尽可能保留重要内容。

#### 验收标准

1. WHEN 视觉重心位于图片中心时 THEN 应该以重心为中心创建最大可能的正方形裁剪区域
2. WHEN 视觉重心靠近边缘时 THEN 应该调整裁剪区域位置，确保不超出图片边界
3. WHEN 图片本身为正方形时 THEN 应该使用整个图片作为裁剪结果
4. WHEN 图片为极端长宽比时 THEN 应该选择包含视觉重心的最大正方形区域